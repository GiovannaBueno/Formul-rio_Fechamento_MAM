<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Máscara de Fechamento</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #121212;
      color: #ffffff;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: 50px auto;
      padding: 40px 20px;
      text-align: left;
      background-color: #1a1a1a;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }
    h2, h3 {
      color: #FFA500;
      text-align: center;
    }
    select, input[type="text"], input[type="date"], textarea {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      margin-bottom: 16px;
      border: 1px solid #333;
      border-radius: 6px;
      background-color: #1e1e1e;
      color: #ffffff;
      font-size: 16px;
    }
    label {
      display: block;
      font-weight: bold;
      color: #cccccc;
    }
    .formulario {
      display: none;
      background-color: #1a1a1a;
      padding: 20px 0;
      border-radius: 8px;
      border-top: 1px solid #292929;
    }
    .equipamento {
      border: 1px solid #333;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 6px;
      background-color: #2a2a2a;
    }
    #resultado {
      margin-top: 30px;
      padding: 20px;
      background-color: #1e1e1e;
      border-radius: 8px;
      border: 1px solid #292929;
      white-space: pre-wrap;
    }
    .btn {
      background-color: #FFA500;
      color: #000;
      border: none;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    .btn:hover {
      background-color: #e69500;
    }
    .btn-remover {
      background-color: #cc0000;
      color: white;
      padding: 5px 10px;
      margin-left: 10px;
    }
    .btn-minimizar {
      padding: 5px 10px;
      margin-left: 10px;
    }
    .equipamento-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
<div class="container">
  <h2>Selecionar Cliente</h2>
  <select id="cliente" onchange="mostrarFormulario()">
    <option value="">-- Selecione um cliente --</option>
    <option value="coleta">COLETA</option>
    <option value="TBNET">TBNET</option>
  </select>

  <!-- Formulário COLETA -->
  <div id="form_coleta" class="formulario">
    <h3>Formulário - COLETA | POSTAGEM </h3>
    <label>Técnico:
      <input type="text" id="tecnico" oninput="gerarTexto('coleta')" />
    </label>
    <button type="button" class="btn" onclick="adicionarEquipamento()">Adicionar Equipamento</button>
    <div id="equipamentosContainer"></div>
    <label>Observação:
      <textarea id="obs_coleta" rows="5" oninput="gerarTexto('coleta')"></textarea>
    </label>
  </div>

  <!-- Formulário TBNET -->
  <div id="form_TBNET" class="formulario">
    <h3>TBNET</h3>
    <label>Tipo de Atividade:
      <select id="tipoAtividade2" onchange="mostrarSubformulario()">
        <option value="">-- Selecione --</option>
        <option value="instalacao">Instalação</option>
        <option value="manutencao">Manutenção</option>
        <option value="coleta">Coleta</option>
        <option value="entrega">Entrega de Equipamento</option>
      </select>
    </label>
    <div id="subform_TBNET_instalacao" class="subformulario" style="display:none;">
      <label>Equipamento Instalado (informar fabricante | modelo | serial):
        <input type="text" id="instalacao_equipamento" oninput="gerarTexto('TBNET')" />
      </label>
    </div>
    <div id="subform_TBNET_manutencao" class="subformulario" style="display:none;">
      <label>Equipamento Manutenção (informar fabricante | modelo | serial):
      <input type="text" id="manutencao_equipamento" oninput="gerarTexto('TBNET')" />
      </label>
      <label>Problema Relatado:
        <input type="text" id="manutencao_problema" oninput="gerarTexto('TBNET')" />
      </label>
      <label>Ação Realizada:
        <input type="text" id="manutencao_acao" oninput="gerarTexto('TBNET')" />
      </label>
    </div>
    <div id="subform_TBNET_coleta" class="subformulario" style="display:none;">
      <label>Equipamento Coletado:
        <input type="text" id="coleta_equipamento" oninput="gerarTexto('TBNET')" />
      </label>
      <label>Motivo da Coleta:
        <input type="text" id="coleta_motivo" oninput="gerarTexto('TBNET')" />
      </label>
    </div>
    <div id="subform_TBNET_entrega" class="subformulario" style="display:none;">
      <label>Equipamento Entregue:
        <input type="text" id="entrega_equipamento" oninput="gerarTexto('TBNET')" />
      </label>
      <label>Responsável pelo Recebimento:
        <input type="text" id="entrega_responsavel" oninput="gerarTexto('TBNET')" />
      </label>
    </div>
    <label>Técnico:
      <input type="text" id="tecnico_tbnet" oninput="gerarTexto('TBNET')" />
    </label>
    <label>Testado e validado pelo suporte TBNET: 
      <input type="text" id="suporte_tbnet" oninput="gerarTexto('TBNET')" />
    </label>
      <label>Testado e validado pelo cliente local: 
    <input type=text id="cliente_tbnet" rows="5" oninput="gerarTexto('TBNET')"/>
    </label> 
    <label>Observação:
            <textarea id="observacao_tbnet" rows="5" oninput="gerarTexto('TBNET')"></textarea>
    </label>   
  
 
  </div>

  <!-- Resultado e botão de cópia -->
  <div id="resultado"></div>
  <button class="btn" id="btnCopiar" style="display:none;" onclick="copiarTexto()">Copiar texto</button>
  <span id="copiado" style="display:none; margin-left:10px; color: #FFA500;">✔ Copiado!</span>
</div>

<script>
  const modelosPorFabricante = {
     "Chip CLARO": ["Modelo A1", "Modelo A2", "Modelo A3"],
    "Chip OI": ["Modelo B1", "Modelo B2"],
    "Chip TIM": ["Modelo C1", "Modelo C2", "Modelo C3"],
    "Chip VIVO": ["Modelo D1"],
    "Aligera": ["Aligera Modelo 1", "Aligera Modelo 2"],
    "Aruba": ["Aruba Modelo 1", "Aruba Modelo 2"],
    "Blockbit": ["Blockbit Modelo X"],
    "Cisco": ["Cisco Modelo 100", "Cisco Modelo 200"],
    "Datacom": ["DM991CE 4W"],
    "Dell": ["Dell Inspiron", "Dell XPS"],
    "D-link": ["DES-3200-28P"],
    "Fortinet": ["Fortinet Modelo 1", "Fortinet Modelo 2"],
    "HP": ["HP Modelo 1", "HP Modelo 2"],
    "HPE": ["MSR1002-4 AC", "HP Modelo 2"],
    "Huawei": ["Huawei Modelo 1"],
    "Lenovo": ["Lenovo Modelo 1", "Lenovo Modelo 2"],
    "Meraki": ["Meraki Modelo 1"],
    "Mikrotik": ["Mikrotik Modelo 1", "Mikrotik Modelo 2"],
    "NetStation": ["NetStation Modelo 1"],
    "Ruckus": ["Ruckus Modelo 1"]
    // ... outros fabricantes
  };

  let equipamentoIndex = 0;

  function mostrarFormulario() {
    const sel = document.getElementById("cliente").value;
    document.querySelectorAll(".formulario").forEach(f => f.style.display="none");
    if (sel==="coleta") document.getElementById("form_coleta").style.display="block";
    else if (sel==="TBNET") document.getElementById("form_TBNET").style.display="block";
    gerarTexto(sel);
  }

  function adicionarEquipamento(){
    const container = document.getElementById("equipamentosContainer");
    equipamentoIndex++;
    const div = document.createElement("div");
    div.className="equipamento";
    div.id = `equip-${equipamentoIndex}`;
    div.innerHTML = `
      <div class="equipamento-header">
        <strong>Equipamento ${equipamentoIndex}</strong>
        <div>
          <button class="btn btn-minimizar" onclick="toggleEquipamento('${div.id}', this)">Minimizar</button>
          <button class="btn btn-remover" onclick="removerEquipamento('${div.id}')">Remover</button>
        </div>
      </div>
      <div class="conteudo-equipamento">
        <label>Fabricante:
          <select onchange="atualizarModelos(this); gerarTexto('coleta')">
            <option value="">-- Selecione --</option>
            ${Object.keys(modelosPorFabricante).map(f=> `<option value="${f}">${f}</option>`).join('')}
          </select>
        </label>
        <label>Modelo:
          <select onchange="gerarTexto('coleta')">
            <option value="">-- Selecione um fabricante primeiro --</option>
          </select>
        </label>
        <label>Serial:
          <input type="text" oninput="gerarTexto('coleta')" />
        </label>
      </div>
    `;
    container.appendChild(div);
    div.scrollIntoView({ behavior: "smooth", block: "center" });
    gerarTexto("coleta");
  }

  function removerEquipamento(id) {
    const el = document.getElementById(id);
    if (el) el.remove();
    gerarTexto("coleta");
  }

  function toggleEquipamento(id, btn) {
    const el = document.getElementById(id);
    const content = el.querySelector(".conteudo-equipamento");
    if (content.style.display==="none") {
      content.style.display="block";
      btn.textContent="Minimizar";
    } else {
      content.style.display="none";
      btn.textContent="Expandir";
    }
  }

  function atualizarModelos(selFab){
    const equip = selFab.closest(".equipamento");
    const selMod = equip.querySelectorAll("select")[1];
    selMod.innerHTML="";
    const fab = selFab.value;
    if (modelosPorFabricante[fab]) {
      modelosPorFabricante[fab].forEach(m => {
        const op = document.createElement("option");
        op.value = m;
        op.textContent = m;
        selMod.appendChild(op);
      });
    } else {
      selMod.innerHTML=`<option value="">-- Selecione um fabricante primeiro --</option>`;
    }
  }

  function mostrarSubformulario() {
    const tipo = document.getElementById("tipoAtividade2").value;
    document.querySelectorAll(".subformulario").forEach(s=>s.style.display="none");
    const div = document.getElementById(`subform_TBNET_${tipo}`);
    if (div) div.style.display="block";
    gerarTexto("TBNET");
  }

  function gerarTexto(cliente){
    let texto = "";
    if (cliente==="coleta") {
      const tecnico = document.getElementById("tecnico").value || "[Não informado]";
      const obs = document.getElementById("obs_coleta").value || "[N/A]";
      texto = `Técnico: ${tecnico}\n\nDescrição da Atividade:\nRealizada a coleta/postagem do(s) equipamento(s) abaixo:\n\nObservação: ${obs}\n`;
      document.querySelectorAll("#equipamentosContainer .equipamento").forEach((equip, i) => {
        const fab = equip.querySelectorAll("select")[0].value || "[Não informado]";
        const mod = equip.querySelectorAll("select")[1].value || "[Não informado]";
        const ser = equip.querySelector("input").value || "[Não informado]";
        texto += `\nEquipamento ${i+1}:\n- Fabricante: ${fab}\n- Modelo: ${mod}\n- Serial: ${ser}\n`;
      });
    } else if (cliente==="TBNET") {
      const tipo = document.getElementById("tipoAtividade2").value || "[atividade]";
      const tecnico_tbnet = document.getElementById("tecnico_tbnet").value || "[Não informado]";
      const observacao_tbnet = document.getElementById("observacao_tbnet").value || "[N/A]";
      const suporte_tbnet = document.getElementById("suporte_tbnet").value || "[Não informado]"
      const cliente_tbnet = document.getElementById("cliente_tbnet").value || "[Não informado]"

  let atividadeTexto = "";
  if (tipo === "instalacao") {
    atividadeTexto = "instalação";
  } else if (tipo === "manutencao") {
    atividadeTexto = "manutenção";
  } else if (tipo === "coleta") {
    atividadeTexto = "coleta";
  } else if (tipo === "entrega") {
    atividadeTexto = "entrega de equipamento";
  } else {
    atividadeTexto = "[atividade]";
  }

   texto = `Tipo de Atividade: ${tipo.toUpperCase()}
Técnico: ${tecnico_tbnet}

Descrição da Atividade:
Realizada a ${atividadeTexto} do(s) equipamento(s) abaixo descritos com sucesso e funcionamento validado pelo cliente local.
`;
      if (tipo==="instalacao") {
        const local = document.getElementById("tecnico_tbnet").value || "[Não informado]";
        const equipInst = document.getElementById("instalacao_equipamento").value || "[Não informado]";
        texto += `\nEquipamento instalado: ${equipInst}\n`;
      } else if (tipo==="manutencao") {
        const manutencao_equipamento = document.getElementById("manutencao_equipamento").value || "[Não informado]"
        const prob = document.getElementById("manutencao_problema").value || "[Não informado]";
        const acao = document.getElementById("manutencao_acao").value || "[Não informado]";
        texto += `\nProblema relatado: ${prob}\nAção realizada: ${acao}\n\nEquipamento Manutenção ${manutencao_equipamento}`;
      } else if (tipo==="coleta") {
        const equipColet = document.getElementById("coleta_equipamento").value || "[equipamento]";
        const motivo = document.getElementById("coleta_motivo").value || "[motivo]";
        texto += `\nEquipamento coletado: ${equipColet}\nMotivo da coleta: ${motivo}`;
      } else if (tipo==="entrega") {
        const equipEnt = document.getElementById("entrega_equipamento").value || "[equipamento]";
        const rec = document.getElementById("entrega_responsavel").value || "[responsável]";
        texto += `\nEquipamento entregue: ${equipEnt}\nResponsável pelo recebimento: ${rec}`;
      }

texto += `\n\nTestado e validado pelo suporte TBNET: ${suporte_tbnet}\nTestado e validado pelo cliente local: ${cliente_tbnet}

Observação: ${observacao_tbnet}\n`;




    }
    document.getElementById("resultado").innerText = texto;
    document.getElementById("btnCopiar").style.display = texto.trim() ? "inline-block" : "none";
  }

  function copiarTexto(){
    const txt = document.getElementById("resultado").innerText;
    if (!txt.trim()) return;
    navigator.clipboard.writeText(txt).then(()=>{
      const aviso = document.getElementById("copiado");
      aviso.style.display="inline";
      setTimeout(()=>aviso.style.display="none", 2000);
    });
  }
</script>
</body>
</html>
